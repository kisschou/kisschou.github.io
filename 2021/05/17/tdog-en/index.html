<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>About a little thing called tdog | 男孩的迷宫</title><meta name="keywords" content="golang"><meta name="author" content="Kisschou"><meta name="copyright" content="Kisschou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="A simple golang framework can also be regarded as a simple golang scaffolding.">
<meta property="og:type" content="article">
<meta property="og:title" content="About a little thing called tdog">
<meta property="og:url" content="https://kisschou.github.io/2021/05/17/tdog-en/index.html">
<meta property="og:site_name" content="男孩的迷宫">
<meta property="og:description" content="A simple golang framework can also be regarded as a simple golang scaffolding.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940">
<meta property="article:published_time" content="2021-05-17T19:37:24.000Z">
<meta property="article:modified_time" content="2021-05-18T09:08:53.585Z">
<meta property="article:author" content="Kisschou">
<meta property="article:tag" content="golang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://kisschou.github.io/2021/05/17/tdog-en/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'About a little thing called tdog',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-05-18 17:08:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://avatars.githubusercontent.com/u/996082?v=4" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div></div></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">男孩的迷宫</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">About a little thing called tdog</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-17T19:37:24.000Z" title="发表于 2021-05-18 03:37:24">2021-05-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-05-18T09:08:53.585Z" title="更新于 2021-05-18 17:08:53">2021-05-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%88%91%E7%9A%84%E5%B0%8F%E7%8E%A9%E6%84%8F/">我的小玩意</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="About a little thing called tdog"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/github/go-mod/go-version/kisschou/tdog?color=green&style=flat-square" alt="go"> <img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/github/last-commit/kisschou/tdog" alt="commit"> <img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/github/license/kisschou/tdog?color=green" alt="licence"> <img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/badge/kisschou-tdog-green" alt="tdog"></p>
<p>Just start in a smaile.</p>
<br />

<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p><a href="/2021/05/17/tdog/">中文文档</a></p>
<p>Core for all my project of golang. It’s sort of a framework, but I feel like it’s actually a scaffolding.</p>
<p>The Restful-Server section is referred to GIN. It’s not powerful, but it’s relatively complete.</p>
<br />


<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>To install Tdog package, you need to install Go and set your Go workspace first.</p>
<ol>
<li>Got it by go command:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go get -u github.com/kisschou/tdog</span><br></pre></td></tr></table></figure></li>
<li>Import it in your code:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &quot;github.com/kisschou/tdog&quot;</span><br></pre></td></tr></table></figure></li>
</ol>
<br />

<h2 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h2><h4 id="Use-it-for-server"><a href="#Use-it-for-server" class="headerlink" title="Use it for server:"></a>Use it for server:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat example.go</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    r := tdog.New()</span><br><span class="line"></span><br><span class="line">    r.GET(<span class="string">&quot;/ping&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(httpUtil *tdog.HttpUtil)</span></span> &#123;</span><br><span class="line">        httpUtil.Res.JSON(http.StatusOK, tdog.H&#123;</span><br><span class="line">            <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Pong GET&quot;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    r.Run() <span class="comment">// Start server.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Use-it-for-scaffolding"><a href="#Use-it-for-scaffolding" class="headerlink" title="Use it for scaffolding:"></a>Use it for scaffolding:</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    id, err := tdog.NewSnowflake(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>).Get()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        log.Fatalln(err)</span><br><span class="line">    &#125;</span><br><span class="line">    log.Printf(id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<br />

<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><p>Functions are at the heart of scaffolding.</p>
<br />

<h4 id="1-MySQL-Handler"><a href="#1-MySQL-Handler" class="headerlink" title="1. MySQL Handler"></a>1. MySQL Handler</h4><p>The <a target="_blank" rel="noopener" href="https://github.com/go-xorm/xorm">XORM</a> package is used, so the detailed functions can be referred to its <a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/go-xorm/xorm">documentation</a>.</p>
<p>Here are just a few things I feel I need:</p>
<ul>
<li><p>Eliminating the need to write initialization over and over again when using the same configuration for the same library within a framework</p>
</li>
<li><p>Made a simple link pool, automatic loading configuration initialization engine, improve the reusability</p>
</li>
</ul>
<br />

<h5 id="1-1-Struct"><a href="#1-1-Struct" class="headerlink" title="1.1 Struct"></a>1.1 Struct</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mySql <span class="keyword">struct</span> &#123;</span><br><span class="line">	engineList <span class="keyword">map</span>[<span class="keyword">string</span>]*xorm.Engine <span class="comment">// engine pool</span></span><br><span class="line">	Engine     *xorm.Engine            <span class="comment">// current engine</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MySqlConf <span class="keyword">struct</span> &#123;</span><br><span class="line">	engine       <span class="keyword">string</span></span><br><span class="line">	Host         <span class="keyword">string</span></span><br><span class="line">	Port         <span class="keyword">string</span></span><br><span class="line">	User         <span class="keyword">string</span></span><br><span class="line">	Pass         <span class="keyword">string</span></span><br><span class="line">	Db           <span class="keyword">string</span></span><br><span class="line">	Charset      <span class="keyword">string</span></span><br><span class="line">	Prefix       <span class="keyword">string</span></span><br><span class="line">	dsn          <span class="keyword">string</span></span><br><span class="line">	Debug        <span class="keyword">bool</span></span><br><span class="line">	MaxIdleConns <span class="keyword">int</span></span><br><span class="line">	MaxOpenConns <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MySql configuration instructions:</p>
<table>
<thead>
<tr>
<th>field</th>
<th>type</th>
<th>desc</th>
</tr>
</thead>
<tbody><tr>
<td>engine</td>
<td>string</td>
<td>Operating database engine.</td>
</tr>
<tr>
<td>Host</td>
<td>string</td>
<td>Database connection address.</td>
</tr>
<tr>
<td>Port</td>
<td>string</td>
<td>Database connection port.</td>
</tr>
<tr>
<td>User</td>
<td>string</td>
<td>Database connection account.</td>
</tr>
<tr>
<td>Pass</td>
<td>string</td>
<td>Database connection password.</td>
</tr>
<tr>
<td>Db</td>
<td>string</td>
<td>Database connection database.</td>
</tr>
<tr>
<td>Charset</td>
<td>string</td>
<td>Character set used by the database.</td>
</tr>
<tr>
<td>Prefix</td>
<td>string</td>
<td>The prefix of the table in the database.</td>
</tr>
<tr>
<td>dsn</td>
<td>string</td>
<td>Data source name.</td>
</tr>
<tr>
<td>Debug</td>
<td>bool</td>
<td>Whether to enable debugging mode.</td>
</tr>
<tr>
<td>MaxIdleConns</td>
<td>int</td>
<td>The max idle connections on pool.</td>
</tr>
<tr>
<td>MaxOpenConns</td>
<td>int</td>
<td>The max open connections on pool.</td>
</tr>
</tbody></table>
<blockquote>
<p>When you customize the MySQL configuration file, you only need to set the following values:</p>
<ul>
<li>Host</li>
<li>Port</li>
<li>User</li>
<li>Pass</li>
<li>Db</li>
<li>Charset</li>
<li>Prefix</li>
<li>Debug</li>
<li>MaxIdleConns</li>
<li>MaxOpenConns</li>
</ul>
</blockquote>
<p>If you are importing a database connection from a configuration file, the configuration file will be styled using TOML. The configuration items are as follows:</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ cat database.toml</span><br><span class="line"><span class="comment">## Whether to enable debugging mode.</span></span><br><span class="line"><span class="attr">debug</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># master</span></span><br><span class="line"><span class="section">[master]</span> <span class="comment"># engine name</span></span><br><span class="line"><span class="attr">host</span> = <span class="string">&quot;127.0.0.1&quot;</span> <span class="comment"># connection address</span></span><br><span class="line"><span class="attr">port</span> = <span class="string">&quot;3306&quot;</span> <span class="comment"># connection port</span></span><br><span class="line"><span class="attr">user</span> = <span class="string">&quot;root&quot;</span> <span class="comment"># connection account</span></span><br><span class="line"><span class="attr">pass</span> = <span class="string">&quot;root&quot;</span> <span class="comment"># connection password</span></span><br><span class="line"><span class="attr">db</span> = <span class="string">&quot;test_db&quot;</span> <span class="comment"># connection database</span></span><br><span class="line"><span class="attr">charset</span> = <span class="string">&quot;utf8mb4&quot;</span> <span class="comment"># Character set used by the database</span></span><br><span class="line"><span class="attr">prefix</span> = <span class="string">&quot;&quot;</span> <span class="comment"># The prefix of the table in the database</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># db read only</span></span><br><span class="line"><span class="section">[master_read]</span> <span class="comment"># engine name</span></span><br><span class="line"><span class="attr">host</span> = <span class="string">&quot;127.0.0.1&quot;</span> <span class="comment"># connection address</span></span><br><span class="line"><span class="attr">port</span> = <span class="string">&quot;3306&quot;</span> <span class="comment"># connection port</span></span><br><span class="line"><span class="attr">user</span> = <span class="string">&quot;root&quot;</span> <span class="comment"># connection account</span></span><br><span class="line"><span class="attr">pass</span> = <span class="string">&quot;root&quot;</span> <span class="comment"># connection password</span></span><br><span class="line"><span class="attr">db</span> = <span class="string">&quot;test_db&quot;</span> <span class="comment"># connection database</span></span><br><span class="line"><span class="attr">charset</span> = <span class="string">&quot;utf8mb4&quot;</span> <span class="comment"># Character set used by the database</span></span><br><span class="line"><span class="attr">prefix</span> = <span class="string">&quot;&quot;</span> <span class="comment"># The prefix of the table in the database</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>See the configuration section for how to get them from the toml file.</p>
</blockquote>
<br />

<h5 id="1-2-NewMySQL-mySql"><a href="#1-2-NewMySQL-mySql" class="headerlink" title="1.2 NewMySQL() *mySql"></a>1.2 NewMySQL() *mySql</h5><p>This function is used to initialize the mySql structure, which is the starting point and the core of everything.</p>
<p>After import tdog, this function is used as <code>tdog.NewMySQL()</code></p>
<br />

<h5 id="1-3-mySql-Change-name-string-xorm-Engine"><a href="#1-3-mySql-Change-name-string-xorm-Engine" class="headerlink" title="1.3 (*mySql) Change(name string) *xorm.Engine"></a>1.3 (*mySql) Change(name string) *xorm.Engine</h5><p>Use the tag name to switch the current database engine.</p>
<p>If the tag name does not exist in the engine group, it will go to the configuration file to obtain the corresponding configuration, and then return to the engine after construction.</p>
<br />

<h5 id="1-4-mySql-New-name-string-conf-MySqlConf-xorm-Engine"><a href="#1-4-mySql-New-name-string-conf-MySqlConf-xorm-Engine" class="headerlink" title="1.4 (*mySql) New(name string, conf *MySqlConf) *xorm.Engine"></a>1.4 (*mySql) New(name string, conf *MySqlConf) *xorm.Engine</h5><p>You can use this function to generate an engine through a custom configuration file.</p>
<br />

<h5 id="1-5-Example"><a href="#1-5-Example" class="headerlink" title="1.5 Example"></a>1.5 Example</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line"></span><br><span class="line">engine := tdog.NewMySQL().Engine <span class="comment">// init a mysql engine use default configuation.</span></span><br><span class="line"></span><br><span class="line">tab1Impl := <span class="built_in">new</span>(tab1) <span class="comment">// init table struct.</span></span><br><span class="line">result, err := engine.Where(<span class="string">&quot;id=?&quot;</span>, <span class="number">1</span>).Get(tab1Impl)</span><br><span class="line"><span class="comment">// Query SQL: SELECT * FROM tab1 WHERE id = 1 LIMIT 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// About Transaction</span></span><br><span class="line">trans := engine.Session() <span class="comment">// init a new transaction.</span></span><br><span class="line"><span class="keyword">defer</span> trans.Close()</span><br><span class="line">affected, err := trans.InsertMulti([]*tab1)</span><br><span class="line"><span class="keyword">if</span> affected &lt; <span class="number">1</span> &amp;&amp; err != <span class="literal">nil</span> &#123;</span><br><span class="line">	trans.Rollback()</span><br><span class="line">&#125;</span><br><span class="line">trans.Commit()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>For more orm operation methods, please refer to the <a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/go-xorm/xorm">document</a>.</p>
</blockquote>
<br />

<h4 id="2-Redis-Handler"><a href="#2-Redis-Handler" class="headerlink" title="2. Redis Handler"></a>2. Redis Handler</h4><p>The <a target="_blank" rel="noopener" href="https://github.com/go-redis/redis">go-redis</a> package is used, so the detailed functions can be referred to its <a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/go-redis/redis/v8">documentation</a>.</p>
<p>Here are just a few things I feel I need:</p>
<ul>
<li><p>Eliminating the need to write initialization over and over again when using the same configuration for the same library within a framework</p>
</li>
<li><p>Made a simple link pool, automatic loading configuration initialization engine, improve the reusability</p>
</li>
</ul>
<br />

<h5 id="2-1-Struct"><a href="#2-1-Struct" class="headerlink" title="2.1 Struct"></a>2.1 Struct</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> redisModel <span class="keyword">struct</span> &#123;</span><br><span class="line">	engineList <span class="keyword">map</span>[<span class="keyword">string</span>]*redisImpl.Client <span class="comment">// Engine Pool</span></span><br><span class="line">	Engine     *redisImpl.Client            <span class="comment">// Current Engine</span></span><br><span class="line">	db         <span class="keyword">int</span>                          <span class="comment">// Current Db</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>If you are importing a redis connection from a configuration file, the configuration file will be styled using TOML. The configuration items are as follows:</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat cache.toml</span><br><span class="line"><span class="section">[master]</span></span><br><span class="line"><span class="attr">host</span> = <span class="string">&quot;127.0.0.1&quot;</span> <span class="comment"># Connection address</span></span><br><span class="line"><span class="attr">port</span> = <span class="string">&quot;6379&quot;</span> <span class="comment"># Connection port</span></span><br><span class="line"><span class="attr">pass</span> = <span class="string">&quot;&quot;</span> <span class="comment"># Connection password</span></span><br><span class="line"><span class="attr">pool_size</span> = <span class="number">10</span> <span class="comment"># Connection pool size</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>See the configuration section for how to get them from the toml file.</p>
</blockquote>
<br />

<h5 id="2-2-Functions-and-Usage"><a href="#2-2-Functions-and-Usage" class="headerlink" title="2.2 Functions and Usage"></a>2.2 Functions and Usage</h5><br />

<h6 id="2-2-1-NewRedis-redisModel"><a href="#2-2-1-NewRedis-redisModel" class="headerlink" title="2.2.1 NewRedis() *redisModel"></a>2.2.1 NewRedis() *redisModel</h6><p>This function is used to initialize the redisModel structure, which is the starting point and the core of everything.</p>
<p>After import tdog, this function is used as <code>tdog.NewRedis()</code></p>
<br />

<h6 id="2-2-2-redisModel-Change-name-string-redisImpl-Client"><a href="#2-2-2-redisModel-Change-name-string-redisImpl-Client" class="headerlink" title="2.2.2 (*redisModel) Change(name string) *redisImpl.Client"></a>2.2.2 (*redisModel) Change(name string) *redisImpl.Client</h6><p>Use the tag name to switch the current redis engine.</p>
<p>If the tag name does not exist in the engine group, it will go to the configuration file to obtain the corresponding configuration, and then return to the engine after construction.</p>
<br />

<h6 id="2-2-3-redisModel-New-name-host-port-pass-string-poolSize-int-redisImpl-Client"><a href="#2-2-3-redisModel-New-name-host-port-pass-string-poolSize-int-redisImpl-Client" class="headerlink" title="2.2.3 (*redisModel) New(name, host, port, pass string, poolSize int) *redisImpl.Client"></a>2.2.3 (*redisModel) New(name, host, port, pass string, poolSize int) *redisImpl.Client</h6><p>You can use this function to generate an engine through a custom configuration file.</p>
<p>Passing parameter description:</p>
<table>
<thead>
<tr>
<th>param</th>
<th>type</th>
<th>desc</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>string</td>
<td>Set the connection name.</td>
</tr>
<tr>
<td>host</td>
<td>string</td>
<td>Set the connection host.</td>
</tr>
<tr>
<td>port</td>
<td>string</td>
<td>Set the connection port.</td>
</tr>
<tr>
<td>pass</td>
<td>string</td>
<td>Set the connection password.</td>
</tr>
<tr>
<td>poolSize</td>
<td>int</td>
<td>Sets the connection pool size.</td>
</tr>
</tbody></table>
<br />

<h6 id="2-2-4-redisModel-Db-index-int-redisImpl-Client"><a href="#2-2-4-redisModel-Db-index-int-redisImpl-Client" class="headerlink" title="2.2.4 (*redisModel) Db(index int) *redisImpl.Client"></a>2.2.4 (*redisModel) Db(index int) *redisImpl.Client</h6><p>Accept an index to switch the libraries used by the current engine.</p>
<br />

<h5 id="2-3-Example"><a href="#2-3-Example" class="headerlink" title="2.3 Example"></a>2.3 Example</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line"></span><br><span class="line">engine := tdog.NewRedis().Engine <span class="comment">// init a redis engine use default configuation.</span></span><br><span class="line">result, err := engine.SetNX(tdog.Ctx, <span class="string">&quot;test:key&quot;</span>, <span class="string">&quot;Hello World&quot;</span>, time.Duration(<span class="number">60</span>)*time.Second).Result() <span class="comment">// Set key</span></span><br><span class="line">engine.Get(tdog.Ctx, <span class="string">&quot;test:key&quot;</span>).String() <span class="comment">// Get key</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>For more orm operation methods, please refer to the <a target="_blank" rel="noopener" href="https://pkg.go.dev/github.com/go-xorm/xorm">document</a>.</p>
</blockquote>
<br />

<h4 id="3-Util-Handler"><a href="#3-Util-Handler" class="headerlink" title="3. Util Handler"></a>3. Util Handler</h4><p>Some scaffolding that I think is quite common. Currently as long as the implementation, not chasing too much performance, limited to strong typing, many places to write very cumbersome and incomplete support, the package will continue to improve, expand.</p>
<br />

<h5 id="3-1-Struct"><a href="#3-1-Struct" class="headerlink" title="3.1 Struct"></a>3.1 Struct</h5><p>There is nothing special about the structure.</p>
<br />

<h5 id="3-2-Functions-and-Usage"><a href="#3-2-Functions-and-Usage" class="headerlink" title="3.2 Functions and Usage"></a>3.2 Functions and Usage</h5><p>This is perhaps the duty of a scaffolding.</p>
<br />

<h6 id="3-2-1-NewUtil-util"><a href="#3-2-1-NewUtil-util" class="headerlink" title="3.2.1 NewUtil() *util"></a>3.2.1 NewUtil() *util</h6><p>This function is used to initialize the util structure, which is the starting point and the core of everything.</p>
<p>After import tdog, this function is used as <code>tdog.NewUtil()</code></p>
<br />

<h6 id="3-2-2-util-GetFilesBySuffix-filePath-string-suffix-string-files-string-err-error"><a href="#3-2-2-util-GetFilesBySuffix-filePath-string-suffix-string-files-string-err-error" class="headerlink" title="3.2.2 (*util) GetFilesBySuffix(filePath string, suffix string) (files []string, err error)"></a>3.2.2 (*util) GetFilesBySuffix(filePath string, suffix string) (files []string, err error)</h6><p>Gets the filename of all the specified suffixes from the specified path.</p>
<br />

<h6 id="3-2-3-util-FileExists-path-string-bool"><a href="#3-2-3-util-FileExists-path-string-bool" class="headerlink" title="3.2.3 (*util) FileExists(path string) bool"></a>3.2.3 (*util) FileExists(path string) bool</h6><p>Check file is exists.</p>
<br />

<h6 id="3-2-4-util-IsDir-path-string-bool"><a href="#3-2-4-util-IsDir-path-string-bool" class="headerlink" title="3.2.4 (*util) IsDir(path string) bool"></a>3.2.4 (*util) IsDir(path string) bool</h6><p>Check if it is a directory.</p>
<br />

<h6 id="3-2-5-util-IsFile-path-string"><a href="#3-2-5-util-IsFile-path-string" class="headerlink" title="3.2.5 (*util) IsFile(path string)"></a>3.2.5 (*util) IsFile(path string)</h6><p>Check if it is a file.</p>
<br />

<h6 id="3-2-6-util-DirExistsAndCreate-path-string"><a href="#3-2-6-util-DirExistsAndCreate-path-string" class="headerlink" title="3.2.6 (*util) DirExistsAndCreate(path string)"></a>3.2.6 (*util) DirExistsAndCreate(path string)</h6><p>Check if the directory exists, create it if it does not exist.</p>
<br />

<h6 id="3-2-7-util-RandomStr-length-int-randType-…int-string"><a href="#3-2-7-util-RandomStr-length-int-randType-…int-string" class="headerlink" title="3.2.7 (*util) RandomStr(length int, randType …int) string"></a>3.2.7 (*util) RandomStr(length int, randType …int) string</h6><p>Generates a string of the specified type and length.</p>
<table>
<thead>
<tr>
<th>param</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody><tr>
<td>length</td>
<td>int</td>
<td>Specifies the length of the generated string</td>
</tr>
<tr>
<td>randType</td>
<td>…int</td>
<td>Specify random type.Optional, multiple options, optional parameters: 1 to add a number 2 to add lowercase letters 3 to add capital letters, the default is 1.</td>
</tr>
</tbody></table>
<br />

<h6 id="3-2-8-util-RandInt64-min-max-int64-int64"><a href="#3-2-8-util-RandInt64-min-max-int64-int64" class="headerlink" title="3.2.8 (*util) RandInt64(min, max int64) int64"></a>3.2.8 (*util) RandInt64(min, max int64) int64</h6><p>Specifies the range to generate a random number of type int64.</p>
<br />

<h6 id="3-2-9-util-InArray-dataType-string-input-needle-interface-bool"><a href="#3-2-9-util-InArray-dataType-string-input-needle-interface-bool" class="headerlink" title="3.2.9 (*util) InArray(dataType string, input, needle interface{}) bool"></a>3.2.9 (*util) InArray(dataType string, input, needle interface{}) bool</h6><p>Determine whether a value exists in the array.</p>
<p>Parameter description:</p>
<ul>
<li><code>dataType</code> : Identifying the type of needle, options:<ul>
<li>[]string</li>
<li>[]int</li>
<li>[]int64</li>
<li>map[string]string</li>
<li>map[string]int</li>
<li>map[string]int64</li>
</ul>
</li>
<li><code>input</code> : Input value, this type is equal to the same type as the <code>value</code> of the <code>dataType</code>.</li>
<li><code>needle</code> : Retrieved set, this type is equal to <code>dataType</code>.</li>
</ul>
<br />

<h6 id="3-2-10-util-Isset-dataType-string-input-needle-interface-bool"><a href="#3-2-10-util-Isset-dataType-string-input-needle-interface-bool" class="headerlink" title="3.2.10 (*util) Isset(dataType string, input, needle interface{}) bool"></a>3.2.10 (*util) Isset(dataType string, input, needle interface{}) bool</h6><p>Determine if a key exists in the array.</p>
<p>Parameter description:</p>
<ul>
<li><code>dataType</code> : Identifying the type of needle, options:<ul>
<li>[]string</li>
<li>[]int</li>
<li>[]int64</li>
<li>[]interface{}</li>
<li>map[string]string</li>
<li>map[string]int</li>
<li>map[string]int64</li>
<li>map[string]interface{}</li>
</ul>
</li>
<li><code>input</code> : Input value, this type is equal to the <code>dataType</code> of the same <code>key</code> type.</li>
<li><code>needle</code> : Retrieved set, this type is equal to <code>dataType</code>.</li>
</ul>
<br />

<h6 id="3-2-11-util-Empty-dataType-string-input-needle-interface-bool"><a href="#3-2-11-util-Empty-dataType-string-input-needle-interface-bool" class="headerlink" title="3.2.11 (*util) Empty(dataType string, input, needle interface{}) bool"></a>3.2.11 (*util) Empty(dataType string, input, needle interface{}) bool</h6><p>If the value of the key specified in the array is null, the number is greater than 0.</p>
<p>Parameter description:</p>
<ul>
<li><code>dataType</code> : Identifying the type of needle, options:<ul>
<li>[]string</li>
<li>[]int</li>
<li>[]int64</li>
<li>map[string]string</li>
<li>map[string]int</li>
<li>map[string]int64</li>
</ul>
</li>
<li><code>input</code> : Input value, this type is equal to the <code>dataType</code> of the same <code>key</code> type.</li>
<li><code>needle</code> : Retrieved set, this type is equal to <code>dataType</code>.</li>
</ul>
<br />

<h6 id="3-2-12-util-ArrayUnique-dataType-string-input-interface-interface"><a href="#3-2-12-util-ArrayUnique-dataType-string-input-interface-interface" class="headerlink" title="3.2.12 (*util) ArrayUnique(dataType string, input interface{}) interface{}"></a>3.2.12 (*util) ArrayUnique(dataType string, input interface{}) interface{}</h6><p>Arrays remove duplicate keys.</p>
<p>Parameter description:</p>
<ul>
<li><code>dataType</code> : Identifying the type of input, options:<ul>
<li>[]string</li>
<li>[]int</li>
<li>[]int64</li>
<li>[]interface{}</li>
<li>map[string]string</li>
<li>map[string]int</li>
<li>map[string]int64</li>
<li>map[string]interface{}</li>
</ul>
</li>
<li><code>input</code> : Arrays to process, this type is equal to <code>dataType</code>.</li>
</ul>
<br />

<h6 id="3-2-13-util-ArrayMerge-dataType-string-list-…interface-interface"><a href="#3-2-13-util-ArrayMerge-dataType-string-list-…interface-interface" class="headerlink" title="3.2.13 (*util) ArrayMerge(dataType string, list …interface{}) interface{}"></a>3.2.13 (*util) ArrayMerge(dataType string, list …interface{}) interface{}</h6><p>Merge multiple arrays.</p>
<blockquote>
<p>Note that these arrays must be of the same type.</p>
</blockquote>
<p>Parameter description:</p>
<ul>
<li><code>dataType</code> : Identifying the type of list, options:<ul>
<li>[]string</li>
<li>[]int</li>
<li>[]interface{}</li>
<li>map[string]string</li>
<li>map[string]int</li>
<li>map[string]interface{}</li>
</ul>
</li>
<li><code>list</code> : Two or more arrays of the same type.</li>
</ul>
<br />

<h6 id="3-2-14-util-Remove-dataType-string-slice-interface-index-int-interface"><a href="#3-2-14-util-Remove-dataType-string-slice-interface-index-int-interface" class="headerlink" title="3.2.14 (*util) Remove(dataType string, slice interface{}, index int) interface{}"></a>3.2.14 (*util) Remove(dataType string, slice interface{}, index int) interface{}</h6><p>This function is written because in Go it seems that only map removes the specified key, not slice removes the specified index.</p>
<p>Parameter description:</p>
<ul>
<li><code>dataType</code> : Identifying the type of slice, options:<ul>
<li>[]string</li>
<li>[]int</li>
<li>[]int64</li>
<li>[]interface{}</li>
</ul>
</li>
<li><code>slice</code> : The section to be processed, this type is equal to <code>dataType</code>.</li>
<li><code>index</code> : The index to drop.</li>
</ul>
<br />

<h6 id="3-2-15-util-VerifyEmail-email-string-bool"><a href="#3-2-15-util-VerifyEmail-email-string-bool" class="headerlink" title="3.2.15 (*util) VerifyEmail(email string) bool"></a>3.2.15 (*util) VerifyEmail(email string) bool</h6><p>Verify that the mailbox format is correct.</p>
<br />

<h6 id="3-2-16-util-VerifyPhone-phone-string-bool"><a href="#3-2-16-util-VerifyPhone-phone-string-bool" class="headerlink" title="3.2.16 (*util) VerifyPhone(phone string) bool"></a>3.2.16 (*util) VerifyPhone(phone string) bool</h6><p>Verify that the format of the phone number is correct.</p>
<blockquote>
<p>For the time being, it only supports mobile phone number verification in mainland China.</p>
</blockquote>
<br />

<h6 id="3-2-17-util-VerifyDate-input-string-bool"><a href="#3-2-17-util-VerifyDate-input-string-bool" class="headerlink" title="3.2.17 (*util) VerifyDate(input string) bool"></a>3.2.17 (*util) VerifyDate(input string) bool</h6><p>Verify that the date format is correct. Format: YYYY-MM-DD.</p>
<br />

<h6 id="3-2-18-util-VerifyDateTime-input-string-bool"><a href="#3-2-18-util-VerifyDateTime-input-string-bool" class="headerlink" title="3.2.18 (*util) VerifyDateTime(input string) bool"></a>3.2.18 (*util) VerifyDateTime(input string) bool</h6><p>Verify that the date and time format is correct. Format: YYYY-MM-DD HH:mm:ss.</p>
<br />

<h6 id="3-2-19-util-GetMachineId-int64"><a href="#3-2-19-util-GetMachineId-int64" class="headerlink" title="3.2.19 (*util) GetMachineId() int64"></a>3.2.19 (*util) GetMachineId() int64</h6><p>Get the device number and generate it through the network card IPv4.</p>
<br />

<h6 id="3-2-20-util-StructToMap-obj-interface-map-string-interface"><a href="#3-2-20-util-StructToMap-obj-interface-map-string-interface" class="headerlink" title="3.2.20 (*util) StructToMap(obj interface{}) map[string]interface{}"></a>3.2.20 (*util) StructToMap(obj interface{}) map[string]interface{}</h6><p>Structure is converted to MAP.</p>
<p>Because of some unknown problems, often lead to panic, so joined recover(), although recovered, but still did not convert successfully.</p>
<p>It’s a function that needs further refinement.</p>
<br />

<h6 id="3-2-21-util-UrlSplit-url-string-protocol-domain-string-port-int"><a href="#3-2-21-util-UrlSplit-url-string-protocol-domain-string-port-int" class="headerlink" title="3.2.21 (*util) UrlSplit(url string) (protocol, domain string, port int)"></a>3.2.21 (*util) UrlSplit(url string) (protocol, domain string, port int)</h6><p>Url decomposition.</p>
<br />

<h6 id="3-2-22-util-UrlJoint-protocol-domain-string-port-int-url-string"><a href="#3-2-22-util-UrlJoint-protocol-domain-string-port-int-url-string" class="headerlink" title="3.2.22 (*util) UrlJoint(protocol, domain string, port int) (url string)"></a>3.2.22 (*util) UrlJoint(protocol, domain string, port int) (url string)</h6><p>Url stitching.</p>
<br />

<h6 id="3-2-23-util-SnakeString-s-string-string"><a href="#3-2-23-util-SnakeString-s-string-string" class="headerlink" title="3.2.23 (*util) SnakeString(s string) string"></a>3.2.23 (*util) SnakeString(s string) string</h6><p>The hump turns into a snake.</p>
<br />

<h6 id="3-2-24-util-CamelString-s-string-string"><a href="#3-2-24-util-CamelString-s-string-string" class="headerlink" title="3.2.24 (*util) CamelString(s string) string"></a>3.2.24 (*util) CamelString(s string) string</h6><p>The shape of a snake turns to a hump.</p>
<br />

<h6 id="3-2-25-util-UcFirst-s-string-string"><a href="#3-2-25-util-UcFirst-s-string-string" class="headerlink" title="3.2.25 (*util) UcFirst(s string) string"></a>3.2.25 (*util) UcFirst(s string) string</h6><p>Capitalize the first letter.</p>
<br />

<h6 id="3-2-26-util-checkPortAlived-port-int-bool"><a href="#3-2-26-util-checkPortAlived-port-int-bool" class="headerlink" title="3.2.26 (*util) checkPortAlived(port int) bool"></a>3.2.26 (*util) checkPortAlived(port int) bool</h6><p>Check if the port is already occupied.</p>
<br />

<h6 id="3-2-26-util-GetPidByPort-port-int-int"><a href="#3-2-26-util-GetPidByPort-port-int-int" class="headerlink" title="3.2.26 (*util) GetPidByPort(port int) int"></a>3.2.26 (*util) GetPidByPort(port int) int</h6><p>Get the PID from the port number.</p>
<blockquote>
<p>It is not always available. For example, coroutines are not available.</p>
</blockquote>
<br />

<h6 id="3-2-27-util-SetEnv-key-interface-value-string-error"><a href="#3-2-27-util-SetEnv-key-interface-value-string-error" class="headerlink" title="3.2.27 (*util) SetEnv(key interface{}, value string) error"></a>3.2.27 (*util) SetEnv(key interface{}, value string) error</h6><p>Writes the specified key value to the environment variable.</p>
<p>Parameter description:</p>
<ul>
<li><p><code>key</code> : The key name can only be String or Map [String] String.</p>
<ul>
<li>if <code>string</code> : Corresponds to the value passed in as the key value.</li>
<li>if <code>map[string]string</code> : Ignore the value passed in and set the key values in the map in bulk.</li>
</ul>
</li>
<li><p><code>value</code> : The corresponding value, which can be <code>empty</code> when the key is map.</p>
</li>
</ul>
<br />

<h6 id="3-2-28-util-GetEnv-keys-…string-map-string-string"><a href="#3-2-28-util-GetEnv-keys-…string-map-string-string" class="headerlink" title="3.2.28 (*util) GetEnv(keys …string) map[string]string"></a>3.2.28 (*util) GetEnv(keys …string) map[string]string</h6><p>Gets one or more key values from an environment variable. </p>
<p>So the input can be one or more, and the map returned corresponds to the input key, and the value corresponds to the value retrieved by the response.</p>
<br />

<h6 id="3-2-29-Recover"><a href="#3-2-29-Recover" class="headerlink" title="3.2.29 Recover()"></a>3.2.29 Recover()</h6><p>Get out of the panic and write down the cause of the panic in your log.</p>
<p>Usually use <code>defer</code>.</p>
<br />

<h6 id="3-2-30-Monitor-err-error"><a href="#3-2-30-Monitor-err-error" class="headerlink" title="3.2.30 Monitor() (err error)"></a>3.2.30 Monitor() (err error)</h6><p>Basic check, check whether Redis and MySQL can connect etc.</p>
<p>It is common to run through the script where it was started to make sure that the running script does not have an error somewhere due to this additional problem.</p>
<br />

<h5 id="3-3-Example"><a href="#3-3-Example" class="headerlink" title="3.3 Example"></a>3.3 Example</h5><p>All functions are available directly after NewUtil.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line"></span><br><span class="line">util := tdog.NewUtil()</span><br><span class="line">res := util.RandomStr(<span class="number">10</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<br />

<h4 id="4-Crypt-Handler"><a href="#4-Crypt-Handler" class="headerlink" title="4. Crypt Handler"></a>4. Crypt Handler</h4><p>In fact, the encapsulation is some simple encryption, but sometimes use it can not remember how to write, scaffolding is the key to easy to use.</p>
<br />

<h5 id="4-1-Struct"><a href="#4-1-Struct" class="headerlink" title="4.1 Struct"></a>4.1 Struct</h5><p>There is nothing in the structure that needs to be introduced.</p>
<br />

<h5 id="4-2-Functions-and-Usage"><a href="#4-2-Functions-and-Usage" class="headerlink" title="4.2 Functions and Usage"></a>4.2 Functions and Usage</h5><p>These are all encryption methods that I still find quite common.</p>
<br />

<h6 id="4-2-1-NewCrypt-input-string-crypt"><a href="#4-2-1-NewCrypt-input-string-crypt" class="headerlink" title="4.2.1 NewCrypt(input string) *crypt"></a>4.2.1 NewCrypt(input string) *crypt</h6><p>This function is used to initialize the crypt structure, which is the starting point and the core of everything.</p>
<p>After import tdog, this function is used as <code>tdog.NewCrypt(&quot;a string to encrypt&quot;)</code></p>
<br />

<h6 id="4-2-2-crypt-Md5-string"><a href="#4-2-2-crypt-Md5-string" class="headerlink" title="4.2.2 (*crypt) Md5() string"></a>4.2.2 (*crypt) Md5() string</h6><p>Returns the MD5 encrypted string.</p>
<br />

<h6 id="4-2-3-crypt-Sha1-string"><a href="#4-2-3-crypt-Sha1-string" class="headerlink" title="4.2.3 (*crypt) Sha1() string"></a>4.2.3 (*crypt) Sha1() string</h6><p>Returns the SHA1 encrypted string.</p>
<br />

<h6 id="4-2-4-crypt-Sha256-string"><a href="#4-2-4-crypt-Sha256-string" class="headerlink" title="4.2.4 (*crypt) Sha256() string"></a>4.2.4 (*crypt) Sha256() string</h6><p>Returns the SHA256 encrypted string.</p>
<br />

<h6 id="4-2-5-crypt-Sha512"><a href="#4-2-5-crypt-Sha512" class="headerlink" title="4.2.5 (*crypt) Sha512()"></a>4.2.5 (*crypt) Sha512()</h6><p>Returns the SHA512 encrypted string.</p>
<br />

<h6 id="4-2-6-crypt-Crc32-string"><a href="#4-2-6-crypt-Crc32-string" class="headerlink" title="4.2.6 (*crypt) Crc32() string"></a>4.2.6 (*crypt) Crc32() string</h6><p>Returns the results processed through Cyclic Redundancy Check 32.</p>
<br />

<h6 id="4-2-7-crypt-Base64Encode-string"><a href="#4-2-7-crypt-Base64Encode-string" class="headerlink" title="4.2.7 (*crypt) Base64Encode() string"></a>4.2.7 (*crypt) Base64Encode() string</h6><p>Base64 encrypts the data and returns the encryption result.</p>
<br />

<h6 id="4-2-8-crypt-Base64Decode-string"><a href="#4-2-8-crypt-Base64Decode-string" class="headerlink" title="4.2.8 (*crypt) Base64Decode() string"></a>4.2.8 (*crypt) Base64Decode() string</h6><p>Returns data decrypted in Base64.</p>
<br />

<h6 id="4-2-9-crypt-UrlBase64Encode-string"><a href="#4-2-9-crypt-UrlBase64Encode-string" class="headerlink" title="4.2.9 (*crypt) UrlBase64Encode() string"></a>4.2.9 (*crypt) UrlBase64Encode() string</h6><p>UrlBase64 encrypts the data and returns the encryption result.</p>
<br />

<h6 id="4-2-10-crypt-UrlBase64Decode-string"><a href="#4-2-10-crypt-UrlBase64Decode-string" class="headerlink" title="4.2.10 (*crypt) UrlBase64Decode() string"></a>4.2.10 (*crypt) UrlBase64Decode() string</h6><p>Returns data decrypted in UrlBase64.</p>
<br />

<h6 id="4-2-11-crypt-Urlencode-string"><a href="#4-2-11-crypt-Urlencode-string" class="headerlink" title="4.2.11 (*crypt) Urlencode() string"></a>4.2.11 (*crypt) Urlencode() string</h6><p>Urlencode encrypts the data and returns the encryption result.</p>
<br />

<h6 id="4-2-12-crypt-Urldecode-string"><a href="#4-2-12-crypt-Urldecode-string" class="headerlink" title="4.2.12 (*crypt) Urldecode() string"></a>4.2.12 (*crypt) Urldecode() string</h6><p>Returns data decrypted in Urldecode.</p>
<br />

<h6 id="4-2-13-crypt-BiuPwdNewBuilder-password-string-salt-string-newPassword-string"><a href="#4-2-13-crypt-BiuPwdNewBuilder-password-string-salt-string-newPassword-string" class="headerlink" title="4.2.13 (*crypt) BiuPwdNewBuilder(password string) (salt string, newPassword string)"></a>4.2.13 (*crypt) BiuPwdNewBuilder(password string) (salt string, newPassword string)</h6><p>The original encryption scheme used by a project called Biushop encrypts incoming data using random salt, fixed salt, MD5, and SHA512, and returns the random salt used for encryption and the encryption result. The decryption result is irreversible.</p>
<br />

<h6 id="4-2-14-crypt-BiuPwdBuilder-salt-string-password-string-newPassword-string"><a href="#4-2-14-crypt-BiuPwdBuilder-salt-string-password-string-newPassword-string" class="headerlink" title="4.2.14 (*crypt) BiuPwdBuilder(salt string, password string) (newPassword string)"></a>4.2.14 (*crypt) BiuPwdBuilder(salt string, password string) (newPassword string)</h6><p>This is a complement to Biushop, because I’m not used to Golang’s support for optional parameters, and I’m a bit obsessive about the order of the parameters.</p>
<p>This method is mainly through the incoming encryption data and random salt, to generate the encrypted results.</p>
<br />

<h6 id="4-2-15-crypt-GenerateRsaKey-bits-int-publicKey-privateKey-string"><a href="#4-2-15-crypt-GenerateRsaKey-bits-int-publicKey-privateKey-string" class="headerlink" title="4.2.15 (*crypt) GenerateRsaKey(bits int) (publicKey, privateKey string)"></a>4.2.15 (*crypt) GenerateRsaKey(bits int) (publicKey, privateKey string)</h6><p>Receive an int to determine the number of bits of the generated RSA key, and return the generated public and private keys.</p>
<br />

<h6 id="4-2-16-crypt-RsaPubEncode-pubKey-string-string"><a href="#4-2-16-crypt-RsaPubEncode-pubKey-string-string" class="headerlink" title="4.2.16 (*crypt) RsaPubEncode(pubKey string) string"></a>4.2.16 (*crypt) RsaPubEncode(pubKey string) string</h6><p>Receive the incoming public key and use it to RSA encrypt the data.</p>
<br />

<h6 id="4-2-17-crypt-RsaPriDecode-priKey-string-string"><a href="#4-2-17-crypt-RsaPriDecode-priKey-string-string" class="headerlink" title="4.2.17 (*crypt) RsaPriDecode(priKey string) string"></a>4.2.17 (*crypt) RsaPriDecode(priKey string) string</h6><p>Receive the incoming private key and use it to RSA decrypt the data.</p>
<br />

<h6 id="4-2-18-crypt-RsaPriEncode-priKey-string-string"><a href="#4-2-18-crypt-RsaPriEncode-priKey-string-string" class="headerlink" title="4.2.18 (*crypt) RsaPriEncode(priKey string) string"></a>4.2.18 (*crypt) RsaPriEncode(priKey string) string</h6><p>Receive the incoming private key and use it to RSA encrypt the data.</p>
<br />

<h6 id="4-2-19-crypt-RsaPubDecode-pubKey-string-string"><a href="#4-2-19-crypt-RsaPubDecode-pubKey-string-string" class="headerlink" title="4.2.19 (*crypt) RsaPubDecode(pubKey string) string"></a>4.2.19 (*crypt) RsaPubDecode(pubKey string) string</h6><p>Receive the incoming public key and use it to RSA decrypt the data.</p>
<br />

<h5 id="4-3-Example"><a href="#4-3-Example" class="headerlink" title="4.3 Example"></a>4.3 Example</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// md5</span></span><br><span class="line">encrypt := tdog.NewCrypt(<span class="string">&quot;inputStr&quot;</span>).Md5()</span><br><span class="line"></span><br><span class="line"><span class="comment">// RSA</span></span><br><span class="line">crypt := tdog.NewCrypt(<span class="string">&quot;inputStr&quot;</span>)</span><br><span class="line">publicKey, privateKey := crypt.GenerateRsaKey(<span class="number">20</span>)</span><br><span class="line">encrypt := crypt.RsaPubEncode(publicKey)</span><br><span class="line">decrypt := tdog.NewCrypt(encrypt).RsaPriDecode(privateKey)</span><br><span class="line"></span><br><span class="line">encrypt = tdog.NewCrypt(decrypt).RsaPriEncode(privateKey)</span><br><span class="line">decrypt = tdog.NewCrypt(encrypt).RsaPubDecode(publicKey)</span><br></pre></td></tr></table></figure>

<br />

<h4 id="5-Excel-Handler"><a href="#5-Excel-Handler" class="headerlink" title="5. Excel Handler"></a>5. Excel Handler</h4><p>The use of <a target="_blank" rel="noopener" href="https://github.com/tealeg/xlsx">XLSX</a> package to do a convenient use of Excel processing tools, because do not know how to face the Excel processing, so just do a simple function.</p>
<br />

<h5 id="5-1-Functions-and-Usage"><a href="#5-1-Functions-and-Usage" class="headerlink" title="5.1 Functions and Usage"></a>5.1 Functions and Usage</h5><br />

<h6 id="5-1-1-NewExcel-file-string-excel"><a href="#5-1-1-NewExcel-file-string-excel" class="headerlink" title="5.1.1 NewExcel(file string) *excel"></a>5.1.1 NewExcel(file string) *excel</h6><p>Initialize an Excel module with the file, which is the starting point and the core of everything.</p>
<p>Note: that the file passed in here must contain the path.</p>
<br />

<h6 id="5-1-2-excel-Get-string"><a href="#5-1-2-excel-Get-string" class="headerlink" title="5.1.2 ( *excel) Get() [][][]string"></a>5.1.2 ( *excel) Get() [][][]string</h6><p>Read all the data out of the file and return it.</p>
<br />

<h6 id="5-1-3-excel-Open-excelImpl-xlsx-File"><a href="#5-1-3-excel-Open-excelImpl-xlsx-File" class="headerlink" title="5.1.3 (*excel) Open() (excelImpl *xlsx.File)"></a>5.1.3 (*excel) Open() (excelImpl *xlsx.File)</h6><p>Return to the operation controller of Excel file, refer to the detailed tutorial of XLSX for the specific operation functions.</p>
<br />

<h4 id="6-Config-Handler"><a href="#6-Config-Handler" class="headerlink" title="6. Config Handler"></a>6. Config Handler</h4><p>This is a configuration file acquisition tool packaged with <a target="_blank" rel="noopener" href="https://github.com/spf13/viper">viper</a>. The reasons for encapsulation are:</p>
<ul>
<li><p>The configuration file of a project is theoretically of the same type and exists in a directory, so it can be used to preset the basic information, eliminating the trouble of manually setting the path and file name each time it is used.</p>
</li>
<li><p>The configuration may not be stored in the same configuration file. In order to eliminate the need for cross-file query, the problem of rebuilding the engine based on the file.</p>
</li>
<li><p>Support query and output of multiple configurations under one or more files.</p>
</li>
</ul>
<br />

<h5 id="6-1-Struct"><a href="#6-1-Struct" class="headerlink" title="6.1 Struct"></a>6.1 Struct</h5><p>The configuration file writing needs to meet the toml configuration file writing requirements, and multiple configuration files can be made in one directory.</p>
<p>Basic Configuration files <code>app.toml</code>, it does not have to exist, but it is the first query file.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tree ./config</span></span><br><span class="line"></span><br><span class="line">config/</span><br><span class="line">├── app.toml</span><br><span class="line">├── cache.toml</span><br><span class="line">├── database.toml</span><br><span class="line">├── error.toml</span><br><span class="line">└── ...</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat app.toml</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> product<span class="string">&#x27;name string</span></span></span><br><span class="line">app_name = &quot;ServiceCenter&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string"> service&#x27;</span>s port string</span></span><br><span class="line">app_port = &quot;8002&quot;</span><br></pre></td></tr></table></figure>

<br />

<h5 id="6-2-Functions-and-Usage"><a href="#6-2-Functions-and-Usage" class="headerlink" title="6.2 Functions and Usage"></a>6.2 Functions and Usage</h5><p>First, have to specify the configuration of the configuration file to env at the intersection. This can use the <code>SetEnv</code> function under the <code>Util</code> module:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line"></span><br><span class="line">tdog.NewUtil().SetEnv(<span class="string">&quot;CONFIG_PATH&quot;</span>, <span class="string">&quot;/path/to/config/&quot;</span>)</span><br></pre></td></tr></table></figure>

<br />

<h6 id="6-2-1-NewConfig-config"><a href="#6-2-1-NewConfig-config" class="headerlink" title="6.2.1 NewConfig() *config"></a>6.2.1 NewConfig() *config</h6><p>Initialize an <code>config</code> module with the file, which is the starting point and the core of everything.</p>
<br />

<h6 id="6-2-2-config-SetPath-path-string-config"><a href="#6-2-2-config-SetPath-path-string-config" class="headerlink" title="6.2.2 (*config) SetPath(path string) *config"></a>6.2.2 (*config) SetPath(path string) *config</h6><p>If the configuration file you are querying is not in the preset path, you can use this function to temporarily modify the query path.</p>
<br />

<h6 id="6-2-3-config-SetFile-name-string-config"><a href="#6-2-3-config-SetFile-name-string-config" class="headerlink" title="6.2.3 (*config) SetFile(name string) *config"></a>6.2.3 (*config) SetFile(name string) *config</h6><p>Specify the query configuration file, that is, only look for the configuration in this configuration file.</p>
<p>Generally use the same file batch query and the same name configuration item query.</p>
<br />

<h6 id="6-2-4-config-SetPrefix-prefix-string-config"><a href="#6-2-4-config-SetPrefix-prefix-string-config" class="headerlink" title="6.2.4 (*config) SetPrefix(prefix string) *config"></a>6.2.4 (*config) SetPrefix(prefix string) *config</h6><p>Set the prefix of the query item. Generally used for batch query of multiple configuration items in the same place.</p>
<br />

<h6 id="6-2-5-config-Get-key-string-configResult"><a href="#6-2-5-config-Get-key-string-configResult" class="headerlink" title="6.2.5 (*config) Get(key string) *configResult"></a>6.2.5 (*config) Get(key string) *configResult</h6><p>For example, to execute <code>Get(&quot;database.masetr.host&quot;)</code>, flow of execution is:</p>
<div class="mermaid">graph TB
	A(Start) --&gt; B[Retrieves database.master.host in app.toml]
  B --&gt; C{exists?}
  C --YES--&gt; D(Returns the result) 
	C --No--&gt; C1(Retrieves master.host in database.toml)
	D --&gt; E(end)
	C1 --&gt; D1{exists?}
	D1 --YES--&gt; D
	D1 --NO--&gt; D2(Returns an empty)
	D2 --&gt; E</div>

<br />

<h6 id="6-2-6-config-GetMulti-keys-…string-map-string-configResult"><a href="#6-2-6-config-GetMulti-keys-…string-map-string-configResult" class="headerlink" title="6.2.6 (*config) GetMulti(keys …string) map[string]*configResult"></a>6.2.6 (*config) GetMulti(keys …string) map[string]*configResult</h6><p>Start batch query.</p>
<br />

<h6 id="6-2-7-configResult-GetSearchKey-string"><a href="#6-2-7-configResult-GetSearchKey-string" class="headerlink" title="6.2.7 (*configResult) GetSearchKey() string"></a>6.2.7 (*configResult) GetSearchKey() string</h6><p>Get the key used by the result query from the result set.</p>
<br />

<h6 id="6-2-8-configResult-IsExists-bool"><a href="#6-2-8-configResult-IsExists-bool" class="headerlink" title="6.2.8 (*configResult) IsExists() bool"></a>6.2.8 (*configResult) IsExists() bool</h6><p>Whether to find the result.</p>
<br />

<h6 id="6-2-9-configResult-RawData-data-interface"><a href="#6-2-9-configResult-RawData-data-interface" class="headerlink" title="6.2.9 (*configResult) RawData() (data interface{})"></a>6.2.9 (*configResult) RawData() (data interface{})</h6><p>Get the result of interface{} type.</p>
<br />

<h6 id="6-2-10-configResult-ToString-data-string"><a href="#6-2-10-configResult-ToString-data-string" class="headerlink" title="6.2.10 (*configResult) ToString() (data string)"></a>6.2.10 (*configResult) ToString() (data string)</h6><p>Get the result of string type.</p>
<br />

<h6 id="6-2-11-configResult-ToInt-data-int"><a href="#6-2-11-configResult-ToInt-data-int" class="headerlink" title="6.2.11 (*configResult) ToInt() (data int)"></a>6.2.11 (*configResult) ToInt() (data int)</h6><p>Get the result of int type.</p>
<br />

<h6 id="6-2-12-configResult-ToBool-data-bool"><a href="#6-2-12-configResult-ToBool-data-bool" class="headerlink" title="6.2.12 (*configResult) ToBool() (data bool)"></a>6.2.12 (*configResult) ToBool() (data bool)</h6><p>Get the result of bool type.</p>
<br />

<h6 id="6-2-13-configResult-ToIntSlice-data-int"><a href="#6-2-13-configResult-ToIntSlice-data-int" class="headerlink" title="6.2.13 (*configResult) ToIntSlice() (data []int)"></a>6.2.13 (*configResult) ToIntSlice() (data []int)</h6><p>Get the result of int slice type.</p>
<br />

<h6 id="6-2-14-configResult-ToStringMap-data-map-string-interface"><a href="#6-2-14-configResult-ToStringMap-data-map-string-interface" class="headerlink" title="6.2.14 (*configResult) ToStringMap() (data map[string]interface{})"></a>6.2.14 (*configResult) ToStringMap() (data map[string]interface{})</h6><p>Get the result of string map type.</p>
<br />

<h6 id="6-2-15-configResult-ToStringMapString-data-map-string-string"><a href="#6-2-15-configResult-ToStringMapString-data-map-string-string" class="headerlink" title="6.2.15 (*configResult) ToStringMapString() (data map[string]string)"></a>6.2.15 (*configResult) ToStringMapString() (data map[string]string)</h6><p>Get the result of string map string type.</p>
<br />

<h6 id="6-2-16-configResult-ToStringMapStringSlice-data-map-string-string"><a href="#6-2-16-configResult-ToStringMapStringSlice-data-map-string-string" class="headerlink" title="6.2.16 (*configResult) ToStringMapStringSlice() (data map[string][]string)"></a>6.2.16 (*configResult) ToStringMapStringSlice() (data map[string][]string)</h6><p>Get the result of string map string slice type.</p>
<br />

<h6 id="6-2-17-configResult-ToStringSlice-data-string"><a href="#6-2-17-configResult-ToStringSlice-data-string" class="headerlink" title="6.2.17 (*configResult) ToStringSlice() (data []string)"></a>6.2.17 (*configResult) ToStringSlice() (data []string)</h6><p>Get the result of string slice type.</p>
<br />

<h6 id="6-2-18-configResult-ToInt64-data-int64"><a href="#6-2-18-configResult-ToInt64-data-int64" class="headerlink" title="6.2.18 (*configResult) ToInt64() (data int64)"></a>6.2.18 (*configResult) ToInt64() (data int64)</h6><p>Get the result of int64 type.</p>
<br />

<h5 id="6-3-Example"><a href="#6-3-Example" class="headerlink" title="6.3 Example"></a>6.3 Example</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line"></span><br><span class="line">tdog.NewUtil().SetEnv(<span class="string">&quot;CONFIG_PATH&quot;</span>, <span class="string">&quot;/path/to/config/&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get</span></span><br><span class="line">tdog.NewConfig().Get(<span class="string">&quot;app_port&quot;</span>).ToString() <span class="comment">// app.toml =&gt; app_port</span></span><br><span class="line">tdog.NewConfig().Get(<span class="string">&quot;database.master.port&quot;</span>).RawData().(<span class="keyword">string</span>) <span class="comment">// database.toml =&gt; [master] port</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// GetMulti</span></span><br><span class="line">resultImpls := NewConfig().GetMulti(<span class="string">&quot;app_port&quot;</span>, <span class="string">&quot;database.master.port&quot;</span>, <span class="string">&quot;cache.port&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> _, resultImpl := <span class="keyword">range</span> resultImpls &#123;</span><br><span class="line">	fmt.Println(resultImpl.GetSearchKey(), resultImpl.IsExists(), resultImpl.ToString())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resultImpls =  NewConfig().SetFile(<span class="string">&quot;cache&quot;</span>).SetPrefix(<span class="string">&quot;master.&quot;</span>).GetMulti(<span class="string">&quot;host&quot;</span>, <span class="string">&quot;port&quot;</span>, <span class="string">&quot;pass&quot;</span>, <span class="string">&quot;pool_size&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> host, port, pass <span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> poolSize <span class="keyword">int</span></span><br><span class="line"><span class="keyword">for</span> _, resultImpl := <span class="keyword">range</span> resultImpls &#123;</span><br><span class="line">	<span class="keyword">switch</span> resultImpl.GetSearchKey() &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;host&quot;</span>:</span><br><span class="line">		host = resultImpl.ToString()</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;port&quot;</span>:</span><br><span class="line">		port = resultImpl.ToString()</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;pass&quot;</span>:</span><br><span class="line">		pass = resultImpl.RawData().(<span class="keyword">string</span>)</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;pool_size&quot;</span>:</span><br><span class="line">		poolSize = resultImpl.ToInt()</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Please feel free to explore more.</p>
<br />

<h4 id="7-Logger-Handler"><a href="#7-Logger-Handler" class="headerlink" title="7. Logger Handler"></a>7. Logger Handler</h4><p>This is the logging module. The idea of replacing ELK with Uber’s ZAP was originally ignited.</p>
<p>The queue uses Redis, so you should configure the connection parameters for Redis first.</p>
<br />

<h5 id="7-1-Struct"><a href="#7-1-Struct" class="headerlink" title="7.1 Struct"></a>7.1 Struct</h5><p>The model structure is so simplistic that there doesn’t seem to be much to say.</p>
<br />

<h5 id="7-2-Functions-and-Usage"><a href="#7-2-Functions-and-Usage" class="headerlink" title="7.2 Functions and Usage"></a>7.2 Functions and Usage</h5><p>The logs are all written to a specified key in Redis. The default key is <code>log:list</code>.</p>
<br />

<h6 id="7-2-1-NewLogger-logger"><a href="#7-2-1-NewLogger-logger" class="headerlink" title="7.2.1 NewLogger() *logger"></a>7.2.1 NewLogger() *logger</h6><p>This function is used to initialize the logger structure, which is the starting point and the core of everything.</p>
<p>After import tdog, this function is used as <code>tdog.NewLogger()</code></p>
<br />

<h6 id="7-2-2-logger-Error-message-string"><a href="#7-2-2-logger-Error-message-string" class="headerlink" title="7.2.2 (*logger) Error(message string)"></a>7.2.2 (*logger) Error(message string)</h6><p>Writes an error message to the log list.</p>
<br />

<h6 id="7-2-3-logger-Warn-message-string"><a href="#7-2-3-logger-Warn-message-string" class="headerlink" title="7.2.3 (*logger) Warn(message string)"></a>7.2.3 (*logger) Warn(message string)</h6><p>Writes a warning message to the log list.</p>
<br />

<h6 id="7-2-4-logger-Info-message-string"><a href="#7-2-4-logger-Info-message-string" class="headerlink" title="7.2.4 (*logger) Info(message string)"></a>7.2.4 (*logger) Info(message string)</h6><p>Writes a message to the log list.</p>
<br />

<h5 id="7-3-Example"><a href="#7-3-Example" class="headerlink" title="7.3 Example"></a>7.3 Example</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;github.com/kisschou/tdog&quot;</span></span><br><span class="line"></span><br><span class="line">tdog.NewLogger().Error(<span class="string">&quot;This is a error message!&quot;</span>)</span><br><span class="line">tdog.NewLogger().Warn(<span class="string">&quot;This is a warn message!&quot;</span>)</span><br><span class="line">tdog.NewLogger().Info(<span class="string">&quot;This is a info message!&quot;</span>)</span><br><span class="line"></span><br><span class="line"># Asynchronous processing is recommended</span><br><span class="line"><span class="keyword">go</span> tdog.NewLogger().Error(<span class="string">&quot;This is a error message!&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>I will add key modifications to it in the future.</p>
<br />

<h4 id="8-Validation-Handler"><a href="#8-Validation-Handler" class="headerlink" title="8. Validation Handler"></a>8. Validation Handler</h4><p>This is a parameter automatic validation module.</p>
<p>In a set of rules, fast, convenient, automatic calibration of the corresponding fields according to the rules, and feedback calibration results.</p>
<p>So, rules are important.</p>
<br />

<h5 id="8-1-Rule-Struct"><a href="#8-1-Rule-Struct" class="headerlink" title="8.1 Rule Struct"></a>8.1 Rule Struct</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Rule <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name      <span class="keyword">string</span>   <span class="string">`json:&quot;name&quot;`</span>     <span class="comment">// key&#x27;s name</span></span><br><span class="line">	ParamType <span class="keyword">string</span>   <span class="string">`json:&quot;type&quot;`</span>     <span class="comment">// val&#x27;s type</span></span><br><span class="line">	IsMust    <span class="keyword">bool</span>     <span class="string">`json:&quot;is_must&quot;`</span>  <span class="comment">// is must be set</span></span><br><span class="line">	Rule      []<span class="keyword">string</span> <span class="string">`json:&quot;validate&quot;`</span> <span class="comment">// vaildate rule</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>field</th>
<th>type</th>
<th>desc</th>
</tr>
</thead>
<tbody><tr>
<td>Name</td>
<td>string</td>
<td>The key name of the query in the parameter list.</td>
</tr>
<tr>
<td>ParamType</td>
<td>string</td>
<td>The type of value to be queried in the parameter list.</td>
</tr>
<tr>
<td>IsMust</td>
<td>bool</td>
<td>Specifies that the key name must exist in the parameter list.</td>
</tr>
<tr>
<td>Rule</td>
<td>[]string</td>
<td>The validation rules used can be found in the Rule Description section below.</td>
</tr>
</tbody></table>
<blockquote>
<p><code>IsMust</code> takes precedence over all rules. All rules take precedence and are executed in the specified order.</p>
</blockquote>
<br />

<h5 id="8-2-Rule-description"><a href="#8-2-Rule-description" class="headerlink" title="8.2 Rule description"></a>8.2 Rule description</h5><table>
<thead>
<tr>
<th>keyword</th>
<th>description</th>
<th>example</th>
</tr>
</thead>
<tbody><tr>
<td>empty</td>
<td>Determine if the value is empty.If it’s a number, it determines if it’s greater than 0.</td>
<td>-</td>
</tr>
<tr>
<td>phone</td>
<td>Determine whether the content of the value is a phone number. Currently, only Chinese mobile phone numbers are supported.</td>
<td>-</td>
</tr>
<tr>
<td>email</td>
<td>Determine whether the contents of the value are mailbox addresses.</td>
<td>-</td>
</tr>
<tr>
<td>scope(x, y)</td>
<td>Set a range to specify a reasonable length for a string or number.</td>
<td>scope(1,10)</td>
</tr>
<tr>
<td>enum(str1,str2,…)</td>
<td>Set an enumeration to constrain the contents of the value.</td>
<td>enum(header,body)</td>
</tr>
<tr>
<td>date</td>
<td>Determine whether the value conforms to the date format, which is yyyy-mm-dd.</td>
<td>-</td>
</tr>
<tr>
<td>datetime</td>
<td>Check whether the value conforms to the date and time format, which is: yyyy-mm-dd HH: MM :ss.</td>
<td>-</td>
</tr>
<tr>
<td>sensitive-word</td>
<td>The desensitized word list retrieves whether the content contains sensitive words. This item is temporarily invalid.</td>
<td>-</td>
</tr>
</tbody></table>
<blockquote>
<p>You can select multiple rules to constrain a field at the same time, such as’ []string{“ empty “, ‘email’, ‘scope(10,)’} ‘to specify a value that also satisfies:<br>· Can’t be empty<br>· Is the correct email address<br>· Length greater than 10</p>
</blockquote>
<blockquote>
<p>The scope(x,y) rule can set both x and y values, or only one of them. When you set the value of x, you’re adding a condition that’s greater than x, and the same thing for the value of y, when you set it, you’re adding a condition that’s less than y.</p>
</blockquote>
<br />

<h5 id="8-3-Functions-and-Usage"><a href="#8-3-Functions-and-Usage" class="headerlink" title="8.3 Functions and Usage"></a>8.3 Functions and Usage</h5><p>In fact, what is said here is some obvious things, but afraid of a long time, they have forgotten, so record.</p>
<br />

<h6 id="8-3-1-NewValidate"><a href="#8-3-1-NewValidate" class="headerlink" title="8.3.1 NewValidate()"></a>8.3.1 NewValidate()</h6><p>This function is used to initialize the validate structure, which is the starting point and the core of everything.</p>
<p>After import tdog, this function is used as <code>tdog.NewValidate()</code></p>
<br />

<h6 id="8-3-2-validate-Rule-input-rule-validate"><a href="#8-3-2-validate-Rule-input-rule-validate" class="headerlink" title="8.3.2 (*validate) Rule(input []*rule) *validate"></a>8.3.2 (*validate) Rule(input []*rule) *validate</h6><p>This function is mainly used to inject a list of rules. The list of rules is derived from the <code>Rule Struct</code>.</p>
<br />

<h6 id="8-3-3-validate-Json-input-string-validate"><a href="#8-3-3-validate-Json-input-string-validate" class="headerlink" title="8.3.3 (*validate) Json(input string) *validate"></a>8.3.3 (*validate) Json(input string) *validate</h6><p>This Function is also used to inject a list of rules, the difference is that the parameter passed to this function is <code>json</code>. If used in conjunction with the <code>Rule Function</code>, the latter will override the former.</p>
<br />

<h6 id="8-3-4-validate-Check-needle-map-string-string-output-validReport-err-error"><a href="#8-3-4-validate-Check-needle-map-string-string-output-validReport-err-error" class="headerlink" title="8.3.4 (*validate) Check(needle map[string]string) (output *validReport, err error)"></a>8.3.4 (*validate) Check(needle map[string]string) (output *validReport, err error)</h6><p>Begin validation and return the <code>validation report structure</code> as soon as any data fails.</p>
<p>The received parameter is <code>map[string]string</code>. This is the collection of uplink data. If multidimensional array is involved, it needs to build its own loop processing.</p>
<p>What is returned is a structure of the <code>Validate report</code> and an <code>error interface</code>. Errors need to be handled by your own judgment. This is an old thing in golang. The use of the structure of the <code>Validate report</code> can be viewed in more detail below.</p>
<br />


<h6 id="8-3-5-validate-UninterruptedCheck-needle-map-string-string-output-validReportCenter-err-error"><a href="#8-3-5-validate-UninterruptedCheck-needle-map-string-string-output-validReportCenter-err-error" class="headerlink" title="8.3.5 (*validate) UninterruptedCheck(needle map[string]string) (output *validReportCenter, err error)"></a>8.3.5 (*validate) UninterruptedCheck(needle map[string]string) (output *validReportCenter, err error)</h6><p>Start the Validate, regardless of whether it encounters an object that has an error, it will stubbornly insist on running all the data.</p>
<p>The received parameter is <code>map[string]string</code>. This is the collection of uplink data. If multidimensional array is involved, it needs to build its own loop processing.</p>
<p>It will pack all the Validate reports into the <code>Validate report center</code> and return. The detailed description of the calibration report center will look down. It also returns an <code>error interface</code> that needs to be handled by itself.</p>
<br />


<h5 id="8-4-Validate-Report-Center-and-Validate-Report"><a href="#8-4-Validate-Report-Center-and-Validate-Report" class="headerlink" title="8.4 Validate Report Center and Validate Report"></a>8.4 Validate Report Center and Validate Report</h5><p>The processing related to the Validate report cannot escape these two little guys.</p>
<br />

<h6 id="8-4-1-Validate-Report"><a href="#8-4-1-Validate-Report" class="headerlink" title="8.4.1 Validate Report"></a>8.4.1 Validate Report</h6><p>This structure has no sub-functions, but it has some parameters that can be used:</p>
<table>
<thead>
<tr>
<th>param</th>
<th>type</th>
<th>desc</th>
</tr>
</thead>
<tbody><tr>
<td>Name</td>
<td>string</td>
<td>The key name of the query in the parameter list.</td>
</tr>
<tr>
<td>Rule</td>
<td>[]string</td>
<td>The validation rules used can be found in the Rule Description section below.</td>
</tr>
<tr>
<td>Result</td>
<td>bool</td>
<td>The result of the verification, <code>True</code> means the verification is successful, <code>False</code> means the verification failed</td>
</tr>
<tr>
<td>Message</td>
<td>string</td>
<td>The text message feedback of the verification result is currently only fixed in Chinese, and customization is not supported. If necessary, you can handle it yourself according by <code>Result</code>.</td>
</tr>
<tr>
<td>Val</td>
<td>interface{}</td>
<td>Gets the associated value. The type is the same as <code>ParamsType</code>.</td>
</tr>
</tbody></table>
<blockquote>
<p>You can use these parameters directly.</p>
<p>If after a round of inspection and found that all have passed the verification, a report structure will be returned at this time, its Name and Rule are empty, Result is True, and Message is Success.<br>So if you see a similar validate report, This can continue the following process.</p>
</blockquote>
<br />

<h6 id="8-4-2-Validate-Report-Center"><a href="#8-4-2-Validate-Report-Center" class="headerlink" title="8.4.2 Validate Report Center"></a>8.4.2 Validate Report Center</h6><ul>
<li><p>(*validReportCenter) ReportList() []*validReport </p>
<blockquote>
<p>get all report from report center.</p>
</blockquote>
</li>
<li><p>(*validReportCenter) ReportByIndex(index int) *validReport</p>
<blockquote>
<p>get the report by index. so given int index, returns <code>*report</code>.</p>
</blockquote>
</li>
<li><p>(*validReportCenter) ReportByName(name string) *validReport</p>
<blockquote>
<p>get the report by name. so must given string name, and will returns <code>*report</code></p>
</blockquote>
</li>
<li><p>(*validReportCenter) BuildTime() string</p>
<blockquote>
<p>get build time from report center.</p>
</blockquote>
</li>
<li><p>(*validReportCenter) ElapsedTime() int64</p>
<blockquote>
<p>get elapsed time from report center. The return value is nanoseconds.</p>
</blockquote>
</li>
<li><p>(*validReportCenter) ToJson() string</p>
<blockquote>
<p>convert to json and return.</p>
</blockquote>
<br /></li>
</ul>
<h2 id="Contributing"><a href="#Contributing" class="headerlink" title="Contributing"></a>Contributing</h2><p>Let’s have a good time together!!!</p>
<ul>
<li>Fork the Project</li>
<li>Create your Feature Branch (git checkout -b feature/AmazingFeature)</li>
<li>Commit your Changes (git commit -m ‘Add some AmazingFeature’)</li>
<li>Push to the Branch (git push origin feature/AmazingFeature)</li>
<li>Open a Pull Request</li>
</ul>
<br />


<h2 id="Licence"><a href="#Licence" class="headerlink" title="Licence"></a>Licence</h2><p>Copyright (c) 2020-present Kisschou.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Kisschou</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://kisschou.github.io/2021/05/17/tdog-en/">https://kisschou.github.io/2021/05/17/tdog-en/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://kisschou.github.io" target="_blank">男孩的迷宫</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/golang/">golang</a></div><div class="post_share"><div class="social-share" data-image="https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2021/05/17/tdog/"><img class="next-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">关于一个叫做tdog的小东西</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/05/17/tdog/" title="关于一个叫做tdog的小东西"><img class="cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-18</div><div class="title">关于一个叫做tdog的小东西</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://avatars.githubusercontent.com/u/996082?v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Kisschou</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kisschou"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#About"><span class="toc-number">1.</span> <span class="toc-text">About</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installation"><span class="toc-number">2.</span> <span class="toc-text">Installation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Quick-start"><span class="toc-number">3.</span> <span class="toc-text">Quick start</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Use-it-for-server"><span class="toc-number">3.0.1.</span> <span class="toc-text">Use it for server:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Use-it-for-scaffolding"><span class="toc-number">3.0.2.</span> <span class="toc-text">Use it for scaffolding:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Functions"><span class="toc-number">4.</span> <span class="toc-text">Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-MySQL-Handler"><span class="toc-number">4.0.1.</span> <span class="toc-text">1. MySQL Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-Struct"><span class="toc-number">4.0.1.1.</span> <span class="toc-text">1.1 Struct</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-NewMySQL-mySql"><span class="toc-number">4.0.1.2.</span> <span class="toc-text">1.2 NewMySQL() *mySql</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-mySql-Change-name-string-xorm-Engine"><span class="toc-number">4.0.1.3.</span> <span class="toc-text">1.3 (*mySql) Change(name string) *xorm.Engine</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-mySql-New-name-string-conf-MySqlConf-xorm-Engine"><span class="toc-number">4.0.1.4.</span> <span class="toc-text">1.4 (*mySql) New(name string, conf *MySqlConf) *xorm.Engine</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-5-Example"><span class="toc-number">4.0.1.5.</span> <span class="toc-text">1.5 Example</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Redis-Handler"><span class="toc-number">4.0.2.</span> <span class="toc-text">2. Redis Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-Struct"><span class="toc-number">4.0.2.1.</span> <span class="toc-text">2.1 Struct</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-Functions-and-Usage"><span class="toc-number">4.0.2.2.</span> <span class="toc-text">2.2 Functions and Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-1-NewRedis-redisModel"><span class="toc-number">4.0.2.2.1.</span> <span class="toc-text">2.2.1 NewRedis() *redisModel</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-2-redisModel-Change-name-string-redisImpl-Client"><span class="toc-number">4.0.2.2.2.</span> <span class="toc-text">2.2.2 (*redisModel) Change(name string) *redisImpl.Client</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-3-redisModel-New-name-host-port-pass-string-poolSize-int-redisImpl-Client"><span class="toc-number">4.0.2.2.3.</span> <span class="toc-text">2.2.3 (*redisModel) New(name, host, port, pass string, poolSize int) *redisImpl.Client</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-2-4-redisModel-Db-index-int-redisImpl-Client"><span class="toc-number">4.0.2.2.4.</span> <span class="toc-text">2.2.4 (*redisModel) Db(index int) *redisImpl.Client</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-Example"><span class="toc-number">4.0.2.3.</span> <span class="toc-text">2.3 Example</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Util-Handler"><span class="toc-number">4.0.3.</span> <span class="toc-text">3. Util Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-Struct"><span class="toc-number">4.0.3.1.</span> <span class="toc-text">3.1 Struct</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-Functions-and-Usage"><span class="toc-number">4.0.3.2.</span> <span class="toc-text">3.2 Functions and Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-1-NewUtil-util"><span class="toc-number">4.0.3.2.1.</span> <span class="toc-text">3.2.1 NewUtil() *util</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-2-util-GetFilesBySuffix-filePath-string-suffix-string-files-string-err-error"><span class="toc-number">4.0.3.2.2.</span> <span class="toc-text">3.2.2 (*util) GetFilesBySuffix(filePath string, suffix string) (files []string, err error)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-3-util-FileExists-path-string-bool"><span class="toc-number">4.0.3.2.3.</span> <span class="toc-text">3.2.3 (*util) FileExists(path string) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-4-util-IsDir-path-string-bool"><span class="toc-number">4.0.3.2.4.</span> <span class="toc-text">3.2.4 (*util) IsDir(path string) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-5-util-IsFile-path-string"><span class="toc-number">4.0.3.2.5.</span> <span class="toc-text">3.2.5 (*util) IsFile(path string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-6-util-DirExistsAndCreate-path-string"><span class="toc-number">4.0.3.2.6.</span> <span class="toc-text">3.2.6 (*util) DirExistsAndCreate(path string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-7-util-RandomStr-length-int-randType-%E2%80%A6int-string"><span class="toc-number">4.0.3.2.7.</span> <span class="toc-text">3.2.7 (*util) RandomStr(length int, randType …int) string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-8-util-RandInt64-min-max-int64-int64"><span class="toc-number">4.0.3.2.8.</span> <span class="toc-text">3.2.8 (*util) RandInt64(min, max int64) int64</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-9-util-InArray-dataType-string-input-needle-interface-bool"><span class="toc-number">4.0.3.2.9.</span> <span class="toc-text">3.2.9 (*util) InArray(dataType string, input, needle interface{}) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-10-util-Isset-dataType-string-input-needle-interface-bool"><span class="toc-number">4.0.3.2.10.</span> <span class="toc-text">3.2.10 (*util) Isset(dataType string, input, needle interface{}) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-11-util-Empty-dataType-string-input-needle-interface-bool"><span class="toc-number">4.0.3.2.11.</span> <span class="toc-text">3.2.11 (*util) Empty(dataType string, input, needle interface{}) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-12-util-ArrayUnique-dataType-string-input-interface-interface"><span class="toc-number">4.0.3.2.12.</span> <span class="toc-text">3.2.12 (*util) ArrayUnique(dataType string, input interface{}) interface{}</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-13-util-ArrayMerge-dataType-string-list-%E2%80%A6interface-interface"><span class="toc-number">4.0.3.2.13.</span> <span class="toc-text">3.2.13 (*util) ArrayMerge(dataType string, list …interface{}) interface{}</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-14-util-Remove-dataType-string-slice-interface-index-int-interface"><span class="toc-number">4.0.3.2.14.</span> <span class="toc-text">3.2.14 (*util) Remove(dataType string, slice interface{}, index int) interface{}</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-15-util-VerifyEmail-email-string-bool"><span class="toc-number">4.0.3.2.15.</span> <span class="toc-text">3.2.15 (*util) VerifyEmail(email string) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-16-util-VerifyPhone-phone-string-bool"><span class="toc-number">4.0.3.2.16.</span> <span class="toc-text">3.2.16 (*util) VerifyPhone(phone string) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-17-util-VerifyDate-input-string-bool"><span class="toc-number">4.0.3.2.17.</span> <span class="toc-text">3.2.17 (*util) VerifyDate(input string) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-18-util-VerifyDateTime-input-string-bool"><span class="toc-number">4.0.3.2.18.</span> <span class="toc-text">3.2.18 (*util) VerifyDateTime(input string) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-19-util-GetMachineId-int64"><span class="toc-number">4.0.3.2.19.</span> <span class="toc-text">3.2.19 (*util) GetMachineId() int64</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-20-util-StructToMap-obj-interface-map-string-interface"><span class="toc-number">4.0.3.2.20.</span> <span class="toc-text">3.2.20 (*util) StructToMap(obj interface{}) map[string]interface{}</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-21-util-UrlSplit-url-string-protocol-domain-string-port-int"><span class="toc-number">4.0.3.2.21.</span> <span class="toc-text">3.2.21 (*util) UrlSplit(url string) (protocol, domain string, port int)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-22-util-UrlJoint-protocol-domain-string-port-int-url-string"><span class="toc-number">4.0.3.2.22.</span> <span class="toc-text">3.2.22 (*util) UrlJoint(protocol, domain string, port int) (url string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-23-util-SnakeString-s-string-string"><span class="toc-number">4.0.3.2.23.</span> <span class="toc-text">3.2.23 (*util) SnakeString(s string) string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-24-util-CamelString-s-string-string"><span class="toc-number">4.0.3.2.24.</span> <span class="toc-text">3.2.24 (*util) CamelString(s string) string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-25-util-UcFirst-s-string-string"><span class="toc-number">4.0.3.2.25.</span> <span class="toc-text">3.2.25 (*util) UcFirst(s string) string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-26-util-checkPortAlived-port-int-bool"><span class="toc-number">4.0.3.2.26.</span> <span class="toc-text">3.2.26 (*util) checkPortAlived(port int) bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-26-util-GetPidByPort-port-int-int"><span class="toc-number">4.0.3.2.27.</span> <span class="toc-text">3.2.26 (*util) GetPidByPort(port int) int</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-27-util-SetEnv-key-interface-value-string-error"><span class="toc-number">4.0.3.2.28.</span> <span class="toc-text">3.2.27 (*util) SetEnv(key interface{}, value string) error</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-28-util-GetEnv-keys-%E2%80%A6string-map-string-string"><span class="toc-number">4.0.3.2.29.</span> <span class="toc-text">3.2.28 (*util) GetEnv(keys …string) map[string]string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-29-Recover"><span class="toc-number">4.0.3.2.30.</span> <span class="toc-text">3.2.29 Recover()</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2-30-Monitor-err-error"><span class="toc-number">4.0.3.2.31.</span> <span class="toc-text">3.2.30 Monitor() (err error)</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-Example"><span class="toc-number">4.0.3.3.</span> <span class="toc-text">3.3 Example</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Crypt-Handler"><span class="toc-number">4.0.4.</span> <span class="toc-text">4. Crypt Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-Struct"><span class="toc-number">4.0.4.1.</span> <span class="toc-text">4.1 Struct</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-Functions-and-Usage"><span class="toc-number">4.0.4.2.</span> <span class="toc-text">4.2 Functions and Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-1-NewCrypt-input-string-crypt"><span class="toc-number">4.0.4.2.1.</span> <span class="toc-text">4.2.1 NewCrypt(input string) *crypt</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-2-crypt-Md5-string"><span class="toc-number">4.0.4.2.2.</span> <span class="toc-text">4.2.2 (*crypt) Md5() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-3-crypt-Sha1-string"><span class="toc-number">4.0.4.2.3.</span> <span class="toc-text">4.2.3 (*crypt) Sha1() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-4-crypt-Sha256-string"><span class="toc-number">4.0.4.2.4.</span> <span class="toc-text">4.2.4 (*crypt) Sha256() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-5-crypt-Sha512"><span class="toc-number">4.0.4.2.5.</span> <span class="toc-text">4.2.5 (*crypt) Sha512()</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-6-crypt-Crc32-string"><span class="toc-number">4.0.4.2.6.</span> <span class="toc-text">4.2.6 (*crypt) Crc32() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-7-crypt-Base64Encode-string"><span class="toc-number">4.0.4.2.7.</span> <span class="toc-text">4.2.7 (*crypt) Base64Encode() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-8-crypt-Base64Decode-string"><span class="toc-number">4.0.4.2.8.</span> <span class="toc-text">4.2.8 (*crypt) Base64Decode() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-9-crypt-UrlBase64Encode-string"><span class="toc-number">4.0.4.2.9.</span> <span class="toc-text">4.2.9 (*crypt) UrlBase64Encode() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-10-crypt-UrlBase64Decode-string"><span class="toc-number">4.0.4.2.10.</span> <span class="toc-text">4.2.10 (*crypt) UrlBase64Decode() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-11-crypt-Urlencode-string"><span class="toc-number">4.0.4.2.11.</span> <span class="toc-text">4.2.11 (*crypt) Urlencode() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-12-crypt-Urldecode-string"><span class="toc-number">4.0.4.2.12.</span> <span class="toc-text">4.2.12 (*crypt) Urldecode() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-13-crypt-BiuPwdNewBuilder-password-string-salt-string-newPassword-string"><span class="toc-number">4.0.4.2.13.</span> <span class="toc-text">4.2.13 (*crypt) BiuPwdNewBuilder(password string) (salt string, newPassword string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-14-crypt-BiuPwdBuilder-salt-string-password-string-newPassword-string"><span class="toc-number">4.0.4.2.14.</span> <span class="toc-text">4.2.14 (*crypt) BiuPwdBuilder(salt string, password string) (newPassword string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-15-crypt-GenerateRsaKey-bits-int-publicKey-privateKey-string"><span class="toc-number">4.0.4.2.15.</span> <span class="toc-text">4.2.15 (*crypt) GenerateRsaKey(bits int) (publicKey, privateKey string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-16-crypt-RsaPubEncode-pubKey-string-string"><span class="toc-number">4.0.4.2.16.</span> <span class="toc-text">4.2.16 (*crypt) RsaPubEncode(pubKey string) string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-17-crypt-RsaPriDecode-priKey-string-string"><span class="toc-number">4.0.4.2.17.</span> <span class="toc-text">4.2.17 (*crypt) RsaPriDecode(priKey string) string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-18-crypt-RsaPriEncode-priKey-string-string"><span class="toc-number">4.0.4.2.18.</span> <span class="toc-text">4.2.18 (*crypt) RsaPriEncode(priKey string) string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-19-crypt-RsaPubDecode-pubKey-string-string"><span class="toc-number">4.0.4.2.19.</span> <span class="toc-text">4.2.19 (*crypt) RsaPubDecode(pubKey string) string</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-3-Example"><span class="toc-number">4.0.4.3.</span> <span class="toc-text">4.3 Example</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Excel-Handler"><span class="toc-number">4.0.5.</span> <span class="toc-text">5. Excel Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-Functions-and-Usage"><span class="toc-number">4.0.5.1.</span> <span class="toc-text">5.1 Functions and Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#5-1-1-NewExcel-file-string-excel"><span class="toc-number">4.0.5.1.1.</span> <span class="toc-text">5.1.1 NewExcel(file string) *excel</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-1-2-excel-Get-string"><span class="toc-number">4.0.5.1.2.</span> <span class="toc-text">5.1.2 ( *excel) Get() [][][]string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-1-3-excel-Open-excelImpl-xlsx-File"><span class="toc-number">4.0.5.1.3.</span> <span class="toc-text">5.1.3 (*excel) Open() (excelImpl *xlsx.File)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Config-Handler"><span class="toc-number">4.0.6.</span> <span class="toc-text">6. Config Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-Struct"><span class="toc-number">4.0.6.1.</span> <span class="toc-text">6.1 Struct</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-Functions-and-Usage"><span class="toc-number">4.0.6.2.</span> <span class="toc-text">6.2 Functions and Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-1-NewConfig-config"><span class="toc-number">4.0.6.2.1.</span> <span class="toc-text">6.2.1 NewConfig() *config</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-2-config-SetPath-path-string-config"><span class="toc-number">4.0.6.2.2.</span> <span class="toc-text">6.2.2 (*config) SetPath(path string) *config</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-3-config-SetFile-name-string-config"><span class="toc-number">4.0.6.2.3.</span> <span class="toc-text">6.2.3 (*config) SetFile(name string) *config</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-4-config-SetPrefix-prefix-string-config"><span class="toc-number">4.0.6.2.4.</span> <span class="toc-text">6.2.4 (*config) SetPrefix(prefix string) *config</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-5-config-Get-key-string-configResult"><span class="toc-number">4.0.6.2.5.</span> <span class="toc-text">6.2.5 (*config) Get(key string) *configResult</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-6-config-GetMulti-keys-%E2%80%A6string-map-string-configResult"><span class="toc-number">4.0.6.2.6.</span> <span class="toc-text">6.2.6 (*config) GetMulti(keys …string) map[string]*configResult</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-7-configResult-GetSearchKey-string"><span class="toc-number">4.0.6.2.7.</span> <span class="toc-text">6.2.7 (*configResult) GetSearchKey() string</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-8-configResult-IsExists-bool"><span class="toc-number">4.0.6.2.8.</span> <span class="toc-text">6.2.8 (*configResult) IsExists() bool</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-9-configResult-RawData-data-interface"><span class="toc-number">4.0.6.2.9.</span> <span class="toc-text">6.2.9 (*configResult) RawData() (data interface{})</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-10-configResult-ToString-data-string"><span class="toc-number">4.0.6.2.10.</span> <span class="toc-text">6.2.10 (*configResult) ToString() (data string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-11-configResult-ToInt-data-int"><span class="toc-number">4.0.6.2.11.</span> <span class="toc-text">6.2.11 (*configResult) ToInt() (data int)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-12-configResult-ToBool-data-bool"><span class="toc-number">4.0.6.2.12.</span> <span class="toc-text">6.2.12 (*configResult) ToBool() (data bool)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-13-configResult-ToIntSlice-data-int"><span class="toc-number">4.0.6.2.13.</span> <span class="toc-text">6.2.13 (*configResult) ToIntSlice() (data []int)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-14-configResult-ToStringMap-data-map-string-interface"><span class="toc-number">4.0.6.2.14.</span> <span class="toc-text">6.2.14 (*configResult) ToStringMap() (data map[string]interface{})</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-15-configResult-ToStringMapString-data-map-string-string"><span class="toc-number">4.0.6.2.15.</span> <span class="toc-text">6.2.15 (*configResult) ToStringMapString() (data map[string]string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-16-configResult-ToStringMapStringSlice-data-map-string-string"><span class="toc-number">4.0.6.2.16.</span> <span class="toc-text">6.2.16 (*configResult) ToStringMapStringSlice() (data map[string][]string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-17-configResult-ToStringSlice-data-string"><span class="toc-number">4.0.6.2.17.</span> <span class="toc-text">6.2.17 (*configResult) ToStringSlice() (data []string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-2-18-configResult-ToInt64-data-int64"><span class="toc-number">4.0.6.2.18.</span> <span class="toc-text">6.2.18 (*configResult) ToInt64() (data int64)</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-3-Example"><span class="toc-number">4.0.6.3.</span> <span class="toc-text">6.3 Example</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Logger-Handler"><span class="toc-number">4.0.7.</span> <span class="toc-text">7. Logger Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-1-Struct"><span class="toc-number">4.0.7.1.</span> <span class="toc-text">7.1 Struct</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2-Functions-and-Usage"><span class="toc-number">4.0.7.2.</span> <span class="toc-text">7.2 Functions and Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#7-2-1-NewLogger-logger"><span class="toc-number">4.0.7.2.1.</span> <span class="toc-text">7.2.1 NewLogger() *logger</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-2-2-logger-Error-message-string"><span class="toc-number">4.0.7.2.2.</span> <span class="toc-text">7.2.2 (*logger) Error(message string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-2-3-logger-Warn-message-string"><span class="toc-number">4.0.7.2.3.</span> <span class="toc-text">7.2.3 (*logger) Warn(message string)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-2-4-logger-Info-message-string"><span class="toc-number">4.0.7.2.4.</span> <span class="toc-text">7.2.4 (*logger) Info(message string)</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-3-Example"><span class="toc-number">4.0.7.3.</span> <span class="toc-text">7.3 Example</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-Validation-Handler"><span class="toc-number">4.0.8.</span> <span class="toc-text">8. Validation Handler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-Rule-Struct"><span class="toc-number">4.0.8.1.</span> <span class="toc-text">8.1 Rule Struct</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-Rule-description"><span class="toc-number">4.0.8.2.</span> <span class="toc-text">8.2 Rule description</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-3-Functions-and-Usage"><span class="toc-number">4.0.8.3.</span> <span class="toc-text">8.3 Functions and Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#8-3-1-NewValidate"><span class="toc-number">4.0.8.3.1.</span> <span class="toc-text">8.3.1 NewValidate()</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-3-2-validate-Rule-input-rule-validate"><span class="toc-number">4.0.8.3.2.</span> <span class="toc-text">8.3.2 (*validate) Rule(input []*rule) *validate</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-3-3-validate-Json-input-string-validate"><span class="toc-number">4.0.8.3.3.</span> <span class="toc-text">8.3.3 (*validate) Json(input string) *validate</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-3-4-validate-Check-needle-map-string-string-output-validReport-err-error"><span class="toc-number">4.0.8.3.4.</span> <span class="toc-text">8.3.4 (*validate) Check(needle map[string]string) (output *validReport, err error)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-3-5-validate-UninterruptedCheck-needle-map-string-string-output-validReportCenter-err-error"><span class="toc-number">4.0.8.3.5.</span> <span class="toc-text">8.3.5 (*validate) UninterruptedCheck(needle map[string]string) (output *validReportCenter, err error)</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-4-Validate-Report-Center-and-Validate-Report"><span class="toc-number">4.0.8.4.</span> <span class="toc-text">8.4 Validate Report Center and Validate Report</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#8-4-1-Validate-Report"><span class="toc-number">4.0.8.4.1.</span> <span class="toc-text">8.4.1 Validate Report</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-4-2-Validate-Report-Center"><span class="toc-number">4.0.8.4.2.</span> <span class="toc-text">8.4.2 Validate Report Center</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Contributing"><span class="toc-number">5.</span> <span class="toc-text">Contributing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Licence"><span class="toc-number">6.</span> <span class="toc-text">Licence</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/05/17/tdog-en/" title="About a little thing called tdog"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="About a little thing called tdog"/></a><div class="content"><a class="title" href="/2021/05/17/tdog-en/" title="About a little thing called tdog">About a little thing called tdog</a><time datetime="2021-05-17T19:37:24.000Z" title="发表于 2021-05-18 03:37:24">2021-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/17/tdog/" title="关于一个叫做tdog的小东西"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=650&amp;w=940" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于一个叫做tdog的小东西"/></a><div class="content"><a class="title" href="/2021/05/17/tdog/" title="关于一个叫做tdog的小东西">关于一个叫做tdog的小东西</a><time datetime="2021-05-17T19:18:51.000Z" title="发表于 2021-05-18 03:18:51">2021-05-18</time></div></div></div></div></div></div></main><footer id="footer" style="background: #afc3cf"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Kisschou</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>